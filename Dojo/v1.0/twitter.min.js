dojo.require("dijit.form.Button"),dojo.require("dijit.Dialog"),dojo.require("dijit.form.ValidationTextBox"),dojo.require("dojo.io.script"),dojo.addOnLoad(function(){var a=dijit.byId("loadBtn"),b=dijit.byId("userDialog"),c=dijit.byId("okBtn"),d=dijit.byId("userTxt");dojo.connect(a,"onClick",function(){b.show()}),dojo.connect(c,"onClick",function(){b.hide();var a=dojo.byId("output");a.innerHTML="Loading...",dojo.io.script.get({url:"http://twitter.com/statuses/user_timeline.json",content:{screen_name:d.getValue()},callbackParamName:"callback",timeout:8e3,load:function(b){a.innerHTML="",dojo.forEach(b,function(b){b.text=b.text.replace(/((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)/gi,'<a href="$1" target="_blank">$1</a>').replace(/@([a-zA-Z0-9_]+)/gi,'<a href="http://twitter.com/$1" target="_blank">@$1</a>').replace(/#([a-zA-Z0-9_]+)/gi,'<a href="http://search.twitter.com/search?q=%23$1" target="_blank">#$1</a>');var c='<div><a href="http://twitter.com/'+b.user.name+'">'+b.user.name+"</a></div>"+b.text+'<div class="created_at">'+b.created_at+"</div>",d=dojo.create("div",{innerHTML:c,"class":"tweetBox"});if(b.user&&b.user.profile_image_url){var e=dojo.create("img",{align:"left",src:b.user.profile_image_url});dojo.place(e,d,"first")}dojo.place(d,a,"last")})},error:function(a){output.innerHTML="Error retrieving tweets: "+a},preventCache:!0,handleAs:"json"})}),dojo.byId("main").style.display=""})
